generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model BridgeRequest {
  id                      Int                  @id @default(autoincrement())
  amount                  String               @db.VarChar
  asset                   String               @db.VarChar
  source_address          String               @db.VarChar
  destination_address     String               @db.VarChar
  source_transaction      String?              @db.VarChar @unique
  destination_transaction String?              @db.VarChar
  source_chain            Chain                
  destination_chain       Chain                
  status                  BridgeRequestStatus
  failure_reason          String?

  @@index([source_address], map: "index_bridge_request_on_source_address")
  @@index([destination_address], map: "index_bridge_request_on_destination_address")

}

enum Chain {
  IRONFISH
  ETHEREUM
  @@map("chain_name")
}

enum BridgeRequestStatus {
  CREATED
  PENDING_PRETRANSFER
  PENDING_ON_DESTINATION_CHAIN
  CONFIRMED
  FAILED
  @@map("bridge_request_status")
}

model BridgeHead {
  hash      String   @db.VarChar @unique
}

model WIronSepoliaHead {
  id   Int    @id
  hash String @db.VarChar
  height Int 

  @@map("wiron_sepolia_head")
}
